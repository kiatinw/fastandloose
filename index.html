<div id="result" style="margin-top: 40px;">
  <canvas id="spectrumChart" width="400" height="100"></canvas>
</div>

<script>
  const scenarios = [
    "I never dry my cutlery—just toss it wet into the drawer.",
    "I top up my car with $5 of petrol at a time.",
    "I don’t own Tupperware. I just loosely cover leftovers with foil.",
    "I throw batteries in the regular bin.",
    "I use my partner’s toothbrush when mine is out of reach.",
    "I leave the butter out on the counter all week.",
    "I don’t check expiration dates unless it smells weird.",
    "I write appointments in pencil... on random bits of paper.",
    "I use one side of a sponge for a month, then flip it.",
    "I microwave fish at work."
  ];

  const quizContainer = document.getElementById("quiz-container");

  scenarios.forEach((text, index) => {
    const div = document.createElement("div");
    div.className = "question";
    div.innerHTML = `
      <p><strong>${index + 1}.</strong> ${text}</p>
      <input type="range" min="0" max="10" value="5" id="q${index}" />
      <span id="val${index}">5</span>/10 upset
    `;
    quizContainer.appendChild(div);

    document.getElementById(`q${index}`).addEventListener("input", function() {
      document.getElementById(`val${index}`).innerText = this.value;
    });
  });

  function showResult() {
    const scores = scenarios.map((_, i) => parseInt(document.getElementById(`q${i}`).value));
    const avg = scores.reduce((a, b) => a + b, 0) / scores.length;

    const ctx = document.getElementById('spectrumChart').getContext('2d');

    new Chart(ctx, {
      type: 'scatter',
      data: {
        datasets: [{
          label: 'You are here →',
          data: [{ x: avg, y: 0 }],
          backgroundColor: '#E74C3C',
          pointRadius: 8
        }]
      },
      options: {
        responsive: true,
        scales: {
          x: {
            type: 'linear',
            position: 'bottom',
            min: 0,
            max: 10,
            title: {
              display: true,
              text: 'Hamish (Fast & Loose) ← → Andy (Slow & Tight)'
            },
            ticks: {
              stepSize: 1
            }
          },
          y: {
            display: false,
            min: -1,
            max: 1
          }
        },
        plugins: {
          legend: { display: false },
          tooltip: {
            callbacks: {
              label: (ctx) => `Score: ${ctx.raw.x.toFixed(1)}`
            }
          }
        }
      }
    });
  }
</script>
